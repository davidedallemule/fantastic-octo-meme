<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Riconoscimento Colore e Nota Musicale</title>
</head>
<body>

    <h1>Riconoscimento Colore e Nota Musicale</h1>

    <p>Usa la fotocamera per riconoscere i colori e ascoltare la nota corrispondente!</p>

    <!-- Video per mostrare il flusso della fotocamera -->
    <video id="videoElement" width="320" height="240" autoplay muted></video>

    <script>
        // Verifica se la fotocamera è supportata
        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
            console.log("Fotocamera supportata");

            // Verifica se il sito è HTTPS
            if (window.location.protocol !== 'https:') {
                alert('Il sito deve essere caricato su HTTPS per accedere alla fotocamera!');
            } else {
                // Richiedi l'accesso alla fotocamera
                navigator.mediaDevices.getUserMedia({ video: true })
                    .then(function(stream) {
                        // Successo: mostra il flusso video
                        var videoElement = document.getElementById('videoElement');
                        videoElement.srcObject = stream;
                    })
                    .catch(function(error) {
                        // Gestione errori
                        console.error("Errore nell'accesso alla fotocamera:", error);
                        alert("Impossibile accedere alla fotocamera. Assicurati di aver concesso i permessi.");
                    });
            }
        } else {
            // Se la fotocamera non è supportata
            alert("La fotocamera non è supportata dal tuo browser.");
        }

        // Funzione per riconoscere il colore e emettere la nota
        function riconosciColore(color) {
            let nota = "";
            switch(color) {
                case 'red':
                    nota = 'DO';
                    break;
                case 'green':
                    nota = 'RE';
                    break;
                case 'yellow':
                    nota = 'MI';
                    break;
                case 'blue':
                    nota = 'FA';
                    break;
                case 'purple':
                    nota = 'SOL';
                    break;
                case 'orange':
                    nota = 'LA';
                    break;
                case 'pink':
                    nota = 'SI';
                    break;
                default:
                    nota = 'Nessuna nota trovata';
            }
            return nota;
        }

        // Esegui la logica di riconoscimento dei colori
        function coloreRiconosciuto(color) {
            if (color) {
                let nota = riconosciColore(color);
                alert("Colore riconosciuto: " + color + " | Nota: " + nota);
                // Qui puoi aggiungere il codice per emettere il suono della nota (usando Web Audio API o un file audio)
            }
        }

        // Esempio: chiamata alla funzione con il colore rosso
        coloreRiconosciuto('red');
    </script>

</body>
</html>
